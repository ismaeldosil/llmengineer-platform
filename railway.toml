[build]
builder = "dockerfile"
dockerfilePath = "apps/api/Dockerfile.railway"
watchPatterns = ["apps/api/**", "packages/shared/**"]

[deploy]
startCommand = "node dist/main"
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Environment variables required for deployment
# These should be set in Railway's dashboard
# [env]
# DATABASE_URL = "postgresql://user:password@host:port/dbname?schema=public"
# JWT_SECRET = "your-secure-random-jwt-secret"
# JWT_EXPIRES_IN = "7d"
# PORT = "3001"
# NODE_ENV = "production"
# CORS_ORIGIN = "https://your-frontend-domain.com"
